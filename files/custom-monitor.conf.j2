# custom-monitor.conf.j2

/var/log/custom-monitor/*.log {
    # Rotate logs daily
    daily

    # Keep the most recent 7 days of logs
    rotate 7

    # Compress rotated logs (gzip is default)
    compress

    # Skips rotation if logs are empty (0 bytes)
    notifempty

    # Use 'create' to ensure new files are created with default permissions after rotation
    create 0640 root adm

    # Post-rotation hook: reload/restart the custom-monitor service
    # The '|| true' handles cases where the service might not support 'reload'
    postrotate
        /bin/systemctl reload-or-restart custom-monitor.service || true
    endscript
}